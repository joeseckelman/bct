{"map":"{\"version\":3,\"sources\":[\"/home/me/dev_work/bgc/cornerstone/assets/js/theme/compare.js\",\"/home/me/dev_work/bgc/cornerstone/assets/js/theme/global/compare-products.js\",\"/home/me/dev_work/bgc/cornerstone/node_modules/lodash/map.js\"],\"names\":[\"Compare\",\"onReady\",\"_this\",\"this\",\"compareProducts\",\"context\",\"urls\",\"message\",\"compareRemoveMessage\",\"$\",\"on\",\"event\",\"comparisons\",\"length\",\"showAlertModal\",\"preventDefault\",\"PageManager\",\"updateCounterNav\",\"counter\",\"$link\",\"urlContext\",\"is\",\"addClass\",\"attr\",\"compare\",\"join\",\"find\",\"html\",\"removeClass\",\"__webpack_exports__\",\"compareCounter\",\"$compareLink\",\"$checked\",\"lodash_map__WEBPACK_IMPORTED_MODULE_1___default\",\"element\",\"value\",\"triggerHandler\",\"item\",\"product\",\"currentTarget\",\"$clickedCompareLink\",\"checked\",\"push\",\"index\",\"indexOf\",\"splice\",\"decrementCounter\",\"module\",\"exports\",\"array\",\"iteratee\",\"result\",\"Array\"],\"mappings\":\"qLAIqBA,kLACjBC,QAAA,WAAU,IAAAC,EAAAC,KACNC,OAAAA,EAAAA,EAAAA,CAAgBD,KAAKE,QAAQC,MAE7B,IAAMC,EAAUJ,KAAKE,QAAQG,qBAE7BC,EAAE,QAAQC,GAAG,QAAS,2BAA4B,SAAAC,GAC1CT,EAAKG,QAAQO,YAAYC,QAAU,IACnCC,OAAAA,EAAAA,EAAAA,CAAeP,GACfI,EAAMI,wBATeC,EAAAA,uGCWrC,SAASC,EAAiBC,EAASC,EAAOC,GACf,IAAnBF,EAAQL,QACHM,EAAME,GAAG,YACVF,EAAMG,SAAS,QAEnBH,EAAMI,KAAK,OAAWH,EAAWI,QAAjC,IAA4CN,EAAQO,KAAK,MACzDN,EAAMO,KAAK,kBAAkBC,KAAKT,EAAQL,SAE1CM,EAAMS,YAAY,QAIXC,EAAA,EAAA,SAAUT,GACrB,IAAIU,EAAiB,GAEfC,EAAetB,EAAE,uBAEvBA,EAAE,QAAQC,GAAG,eAAgB,WACzB,IAAMsB,EAAWvB,EAAE,QAAQiB,KAAK,oCAGhCT,EADAa,EAAiBE,EAASnB,OAASoB,GAAAA,CAAMD,EAAU,SAAAE,GAAO,OAAIA,EAAQC,QAAS,GAC9CJ,EAAcX,KAGnDX,EAAE,QAAQ2B,eAAe,gBAEzB3B,EAAE,QAAQC,GAAG,QAAS,oBAAqB,SAAAC,GACvC,IA/B2B0B,EA+BrBC,EAAU3B,EAAM4B,cAAcJ,MAC9BK,EAAsB/B,EAAE,uBAE1BE,EAAM4B,cAAcE,SAlCGJ,EAmCUC,EAAhBR,EAlCjBY,KAAKL,IATjB,SAA0BnB,EAASmB,GAC/B,IAAMM,EAAQzB,EAAQ0B,QAAQP,GAE1BM,GAAS,GACTzB,EAAQ2B,OAAOF,EAAO,GAyClBG,CAAiBhB,EAAgBQ,GAGrCrB,EAAiBa,EAAgBU,EAAqBpB,KAG1DX,EAAE,QAAQC,GAAG,SAAU,yBAA0B,SAAAC,GAC/BF,EAAEE,EAAM4B,eACUb,KAAK,oCAEfb,QAAU,IAC5BC,OAAAA,EAAAA,EAAAA,CAAe,oDACfH,EAAMI,oBAIdN,EAAE,QAAQC,GAAG,QAAS,sBAAuB,WAGzC,GAF6BD,EAAE,QAAQiB,KAAK,oCAEnBb,QAAU,EAE/B,OADAC,OAAAA,EAAAA,EAAAA,CAAe,qDACR,0CCjDnBiC,EAAAC,QAXA,SAAAC,EAAAC,GAKA,IAJA,IAAAP,GAAA,EACA9B,EAAA,MAAAoC,EAAA,EAAAA,EAAApC,OACAsC,EAAAC,MAAAvC,KAEA8B,EAAA9B,GACAsC,EAAAR,GAAAO,EAAAD,EAAAN,GAAAA,EAAAM,GAEA,OAAAE\",\"sourcesContent\":[\"import PageManager from './page-manager';\\nimport { showAlertModal } from './global/modal';\\nimport compareProducts from './global/compare-products';\\n\\nexport default class Compare extends PageManager {\\n    onReady() {\\n        compareProducts(this.context.urls);\\n\\n        const message = this.context.compareRemoveMessage;\\n\\n        $('body').on('click', '[data-comparison-remove]', event => {\\n            if (this.context.comparisons.length <= 2) {\\n                showAlertModal(message);\\n                event.preventDefault();\\n            }\\n        });\\n    }\\n}\\n\",\"import _ from 'lodash';\\nimport { showAlertModal } from './modal';\\n\\nfunction decrementCounter(counter, item) {\\n    const index = counter.indexOf(item);\\n\\n    if (index > -1) {\\n        counter.splice(index, 1);\\n    }\\n}\\n\\nfunction incrementCounter(counter, item) {\\n    counter.push(item);\\n}\\n\\nfunction updateCounterNav(counter, $link, urlContext) {\\n    if (counter.length !== 0) {\\n        if (!$link.is('visible')) {\\n            $link.addClass('show');\\n        }\\n        $link.attr('href', `${urlContext.compare}/${counter.join('/')}`);\\n        $link.find('span.countPill').html(counter.length);\\n    } else {\\n        $link.removeClass('show');\\n    }\\n}\\n\\nexport default function (urlContext) {\\n    let compareCounter = [];\\n\\n    const $compareLink = $('a[data-compare-nav]');\\n\\n    $('body').on('compareReset', () => {\\n        const $checked = $('body').find('input[name=\\\"products\\\\[\\\\]\\\"]:checked');\\n\\n        compareCounter = $checked.length ? _.map($checked, element => element.value) : [];\\n        updateCounterNav(compareCounter, $compareLink, urlContext);\\n    });\\n\\n    $('body').triggerHandler('compareReset');\\n\\n    $('body').on('click', '[data-compare-id]', event => {\\n        const product = event.currentTarget.value;\\n        const $clickedCompareLink = $('a[data-compare-nav]');\\n\\n        if (event.currentTarget.checked) {\\n            incrementCounter(compareCounter, product);\\n        } else {\\n            decrementCounter(compareCounter, product);\\n        }\\n\\n        updateCounterNav(compareCounter, $clickedCompareLink, urlContext);\\n    });\\n\\n    $('body').on('submit', '[data-product-compare]', event => {\\n        const $this = $(event.currentTarget);\\n        const productsToCompare = $this.find('input[name=\\\"products\\\\[\\\\]\\\"]:checked');\\n\\n        if (productsToCompare.length <= 1) {\\n            showAlertModal('You must select at least two products to compare');\\n            event.preventDefault();\\n        }\\n    });\\n\\n    $('body').on('click', 'a[data-compare-nav]', () => {\\n        const $clickedCheckedInput = $('body').find('input[name=\\\"products\\\\[\\\\]\\\"]:checked');\\n\\n        if ($clickedCheckedInput.length <= 1) {\\n            showAlertModal('You must select at least two products to compare');\\n            return false;\\n        }\\n    });\\n}\\n\",\"/**\\n * A specialized version of `_.map` for arrays without support for iteratee\\n * shorthands.\\n *\\n * @private\\n * @param {Array} [array] The array to iterate over.\\n * @param {Function} iteratee The function invoked per iteration.\\n * @returns {Array} Returns the new mapped array.\\n */\\nfunction arrayMap(array, iteratee) {\\n  var index = -1,\\n      length = array == null ? 0 : array.length,\\n      result = Array(length);\\n\\n  while (++index < length) {\\n    result[index] = iteratee(array[index], index, array);\\n  }\\n  return result;\\n}\\n\\nmodule.exports = arrayMap;\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{246:function(t,e,n){\"use strict\";n.r(e),function(t){n.d(e,\"default\",function(){return a});var o=n(41),c=n(12),r=n(276);var a=function(e){var n,o;function a(){return e.apply(this,arguments)||this}return o=e,(n=a).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o,a.prototype.onReady=function(){var e=this;Object(r.a)(this.context.urls);var n=this.context.compareRemoveMessage;t(\"body\").on(\"click\",\"[data-comparison-remove]\",function(t){e.context.comparisons.length<=2&&(Object(c.c)(n),t.preventDefault())})},a}(o.a)}.call(this,n(0))},276:function(t,e,n){\"use strict\";(function(t){n(11);var o=n(280),c=n.n(o),r=n(12);function a(t,e,n){0!==t.length?(e.is(\"visible\")||e.addClass(\"show\"),e.attr(\"href\",n.compare+\"/\"+t.join(\"/\")),e.find(\"span.countPill\").html(t.length)):e.removeClass(\"show\")}e.a=function(e){var n=[],o=t(\"a[data-compare-nav]\");t(\"body\").on(\"compareReset\",function(){var r=t(\"body\").find('input[name=\"products[]\"]:checked');a(n=r.length?c()(r,function(t){return t.value}):[],o,e)}),t(\"body\").triggerHandler(\"compareReset\"),t(\"body\").on(\"click\",\"[data-compare-id]\",function(o){var c,r=o.currentTarget.value,u=t(\"a[data-compare-nav]\");o.currentTarget.checked?(c=r,n.push(c)):function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}(n,r),a(n,u,e)}),t(\"body\").on(\"submit\",\"[data-product-compare]\",function(e){t(e.currentTarget).find('input[name=\"products[]\"]:checked').length<=1&&(Object(r.c)(\"You must select at least two products to compare\"),e.preventDefault())}),t(\"body\").on(\"click\",\"a[data-compare-nav]\",function(){if(t(\"body\").find('input[name=\"products[]\"]:checked').length<=1)return Object(r.c)(\"You must select at least two products to compare\"),!1})}}).call(this,n(0))},280:function(t,e){t.exports=function(t,e){for(var n=-1,o=null==t?0:t.length,c=Array(o);++n<o;)c[n]=e(t[n],n,t);return c}}}]);","extractedComments":[]}